import sys

fileName = sys.argv[1]
outputFile = sys.argv[2]
i = 0
velocities = []
rotations = []
leftEncoderPositions = []
rightEncoderPositions = []

with open(fileName) as f, open(outputFile, "w") as out:
    for line in f.readlines():
    	if line.startsWith(" ") or line[0].isdigit():
	        for entry in line.strip().split(" "):
	        	try:
					Float(entry)
				except:
					continue
	            if i == 0:
	                velocities.append(entry)
	            if i == 1:
	                rotations.append(entry)
	            if i == 2:
	                leftEncoderPositions.append(entry)
	            if i == 4:
	                rightEncoderPositions.append(entry)

	            out.write(entry + " ")
	            i += 1
	            if i == 6:
	                i = 0
	                out.write("\n")


velocityArray = ",\n\t\t".join(velocities)
rotationsArray = ",\n\t\t".join(rotations)
leftEncoderPositionArray = ",\n\t\t".join(leftEncoderPositions)
rightEncoderPositionArray = ",\n\t\t".join(rightEncoderPositions)


content = """
/*
PATH HAS BEEN AUTO-GENERATED BY THE PYTHON PARSER. DO NOT TOUCH OR YOU WILL HAVE BAD LUCK FOR 100 YEARS.
*/
package frc.robot;

public class Test {
	public double[] generated_Velocities = {
		%s
	};
	public double[] generated_Rotations = {
		%s
	};
	public double[] generated_leftEncoderPositions = {
		%s
	};
	public double[] generated_rightEncoderPositions = {
		%s
	};

}

""" % (
    velocityArray,
    rotationsArray,
    leftEncoderPositionArray,
    rightEncoderPositionArray,
)

with open(fileName + ".java", "w") as f:
    f.write(content)
